<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{layout :: content(~{::section})}">

<head>
<title>Add Venue</title>
</head>

<body>
	<section class="fade-in">
		<div class="row justify-content-center">
			<div class="col-md-8 col-lg-6">
				<div class="card shadow border-0">
					<div class="card-header bg-primary text-white py-3">
						<h4 class="mb-0 fw-bold"
							th:text="${venue.venueId != null ? 'Edit Venue' : 'Add New Venue'}">Add
							New Venue</h4>
					</div>
					<div class="card-body p-4">
						<div th:if="${success}"
							class="alert alert-success alert-dismissible fade show"
							role="alert">
							<span th:text="${success}"></span>
							<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
						</div>
						<div th:if="${error}"
							class="alert alert-danger alert-dismissible fade show"
							role="alert">
							<span th:text="${error}"></span>
							<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
						</div>
						<form th:action="@{/venues/add}" th:object="${venue}"
							method="post" enctype="multipart/form-data">
							<input type="hidden" th:field="*{venueId}" />
							<div class="mb-3">
								<label for="venueName" class="form-label fw-bold">Venue
									Name</label> <input type="text" class="form-control" id="venueName"
									th:field="*{venueName}" required>
							</div>
							<div class="mb-3">
								<label for="location" class="form-label fw-bold">Location</label>
								<input type="text" class="form-control" id="location"
									th:field="*{location}" required>
							</div>
							<div class="row mb-3">
								<div class="col-md-6">
									<label for="capacity" class="form-label fw-bold">Capacity</label>
									<input type="number" class="form-control" id="capacity"
										th:field="*{capacity}" required min="1">
								</div>
								<div class="col-md-6">
									<label for="pricePerDay" class="form-label fw-bold">Price
										Per Day (â‚¹)</label> <input type="number" step="0.01"
										class="form-control" id="pricePerDay"
										th:field="*{pricePerDay}" required min="0">
								</div>
							</div>
							<div class="mb-3">
								<label for="imageFile" class="form-label fw-bold">Venue
									Image</label> <input type="file" class="form-control" id="imageFile"
									name="imageFile" accept="image/*"> <small
									class="text-muted">Upload an image for this venue (JPG,
									PNG, etc.)</small>
								<div
									th:if="${venue.imagePath != null && !venue.imagePath.isEmpty()}"
									class="mt-2">
									<img th:src="@{${venue.imagePath}}" alt="Current venue image"
										class="img-thumbnail" style="max-height: 150px;">
									<p class="text-muted small mt-1">Current image</p>
								</div>
							</div>
							<div th:if="${venue.venueId != null}" class="mb-3">
								<label class="form-label fw-bold">Venue Status</label>
								<div class="d-flex gap-2">
									<a th:if="${venue.status == 'AVAILABLE'}"
									th:href="@{/venues/maintenance/{id}(id=${venue.venueId})}"
										class="btn btn-warning"> <i class="fas fa-tools me-2"></i>Mark
										as Maintenance
									</a> <a th:if="${venue.status == 'MAINTENANCE'}"
										th:href="@{/venues/available/{id}(id=${venue.venueId})}"
										class="btn btn-success"> <i
										class="fas fa-check-circle me-2"></i>Make Available
									</a>

								</div>
								<small class="text-muted">Current status: <span
									th:text="${venue.status}" class="fw-bold"></span></small>
							</div>
							<div class="d-flex justify-content-end mt-4">
								<a th:href="@{/venues}" class="btn btn-light me-2">Cancel</a>
								<button type="submit" class="btn btn-primary px-4 fw-bold">Save
									Venue</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>

</html>
